{namespace v=Tx_Vhs_ViewHelpers}
{namespace flux=FluidTYPO3\Flux\ViewHelpers}

<f:layout name="FCE" />

<f:section name="Configuration">
	<flux:form id="tabs" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:label" description="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:description" enabled="TRUE" wizardTab="vantomas">
		<flux:form.sheet name="display" label="Display">
		</flux:form.sheet>

		<flux:form.sheet name="tabs" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.label">
			<flux:form.section name="tabs" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.tabs.label">
				<flux:form.object name="tab" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.tabs.fields.tab.label">
					<flux:field.input name="title" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.tabs.fields.tab.title" />
					<flux:field.input name="class" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.tabs.fields.tab.class" />
					<flux:field.checkbox name="active" label="LLL:EXT:vantomas/Resources/Private/Language/Elements/Tabs.xlf:groups.tabs.tabs.fields.tab.active" />
				</flux:form.object>
			</flux:form.section>
		</flux:form.sheet>

		<flux:grid>
			<flux:grid.row>
				<f:if condition="{tabs}">
					<f:for each="{tabs}" as="tab" iteration="iteration">
						<flux:grid.column style="width: {v:math.division(b: '{tabs -> f:count()}', a: 100)}%">
							<flux:form.content name="content.{iteration.index}" label="Content, tab {iteration.cycle}" />
						</flux:grid.column>
					</f:for>
				</f:if>
			</flux:grid.row>
		</flux:grid>
	</flux:form>
</f:section>

<f:section name="Preview">
	<flux:widget.grid />
</f:section>

<f:section name="Main">
	<v:var.set name="activeTabIndex" value="0" />
	<f:if condition="{tabs}">
		<f:for each="{tabs}" as="tab" iteration="iteration">
			<f:if condition="{tab.tab.active}">
				<v:var.set name="activeTabIndex" value="{iteration.index}" />
			</f:if>
		</f:for>
	</f:if>

	<div class="section-container auto" data-section>
		<f:if condition="{tabs}">
			<f:for each="{tabs}" as="tab" iteration="iteration">
				<section class="section {f:if(condition: '{activeTabIndex} == {iteration.index}', then: 'active')}">
					<p class="title"><a href="#">{tab.tab.title}</a></p>
					<div class="content">
						<flux:content.render area="content.{iteration.index}" />
					</div>
				</section>
			</f:for>
		</f:if>
	</div>
</f:section>